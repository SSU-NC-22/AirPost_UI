{"ast":null,"code":"var _jsxFileName = \"/home/seungmin/ncgo/ui/src/ManagementComponents/Register/RegisterNode.tsx\";\nimport React, { Component } from 'react';\nimport Select from 'react-select';\nimport { NODE_URL, SINK_URL } from '../../defineUrl';\nimport LarLngPicker from '../LatLngPicker'; // react-select : https://github.com/JedWatson/react-select\n\n/*\nRegisterNode\n- Show modal to register node\n*/\nclass RegisterNode extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      sinkList: [],\n      valueList: [],\n      node_name: '',\n      kind: '',\n      location: {\n        lng: 0,\n        lat: 0,\n        alt: 0\n      },\n      sink_id: 0,\n      station_id: 0,\n      nameValid: false,\n      kindValid: false,\n      valueValid: false,\n      sinkValid: false,\n      stationValid: false,\n      nodeList: []\n    };\n\n    this.handleNameChange = e => {\n      // name valid check : user should enter node name\n      if (e.target.value.length > 0) {\n        this.setState({\n          node_name: e.target.value,\n          nameValid: true\n        });\n      } else {\n        this.setState({\n          node_name: e.target.value,\n          nameValid: false\n        });\n      }\n    };\n\n    this.handleKindChange = nodeKind => {\n      if (nodeKind !== null) {\n        this.setState({\n          kind: nodeKind.value,\n          kindValid: true\n        });\n      } else {\n        this.setState({\n          kind: nodeKind.value,\n          kindValid: false\n        });\n      }\n\n      if (nodeKind.value == 'drone') {\n        let DroneOption = [{\n          value_name: 'battery'\n        }, {\n          value_name: 'gps'\n        }, {\n          value_name: 'atm'\n        }, {\n          value_name: 'accelerate'\n        }, {\n          value_name: 'speed'\n        }];\n        this.setState({\n          valueList: DroneOption,\n          valueValid: true\n        });\n      }\n\n      if (nodeKind.value == 'station') {\n        let StationOption = [{\n          value_name: 'gps'\n        }, {\n          value_name: 'ultrasonic'\n        }];\n        this.setState({\n          valueList: StationOption,\n          valueValid: true,\n          stationValid: true\n        });\n      }\n\n      if (nodeKind.value == 'tag') {\n        this.setState({\n          valueValid: true,\n          stationValid: true\n        });\n      }\n    };\n\n    this.handleLarLngChange = location => {\n      this.setState({\n        location\n      });\n    };\n\n    this.handleSinkChange = sink => {\n      // sink valid check : user should select sink\n      if (sink !== null) {\n        this.setState({\n          sink_id: sink.id,\n          sinkValid: true\n        });\n      } else {\n        this.setState({\n          sink_id: sink.id,\n          sinkValid: false\n        });\n      }\n    };\n\n    this.handleStationChange = station => {\n      if (this.state.kind == 'drone') {\n        if (station !== null) {\n          this.setState({\n            station_id: station.id,\n            stationValid: true\n          });\n        } else {\n          this.setState({\n            station_id: station.id,\n            stationValid: false\n          });\n        }\n      } else {\n        if (station !== null) {\n          this.setState({\n            station_id: station.id,\n            stationValid: false\n          });\n        } else {\n          this.setState({\n            station_id: station.id,\n            stationValid: true\n          });\n        }\n      }\n    };\n\n    this.handleValueChange = idx => e => {\n      // Value list is updated dynamic. Its element can be added or removed freely.\n      // so find changing field by using received idx and change state.\n      const newsensor_values = this.state.valueList.map((value, sidx) => {\n        if (idx !== sidx) return value;\n        return { ...value,\n          value_name: e.target.value\n        };\n      }); // value list valid check : User should enter more than a value and each value input field should be filled\n\n      if (newsensor_values !== null && !newsensor_values.some(value => value.value_name === '') && // find empty field\n      newsensor_values[idx].value_name.length > 0) {\n        this.setState({\n          valueList: newsensor_values,\n          valueValid: true\n        });\n      } else {\n        this.setState({\n          valueList: newsensor_values,\n          valueValid: false\n        });\n      }\n    };\n\n    this.handleRemoveClick = idx => () => {\n      // Remove #idx value list elem which user picked\n      this.setState({\n        valueList: this.state.valueList.filter((s, sidx) => idx !== sidx)\n      });\n    };\n\n    this.handleAddClick = () => {\n      // Add a value list elem\n      this.setState({\n        valueList: [...this.state.valueList, {\n          value_name: ''\n        }]\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var url = NODE_URL;\n      var data = this.state;\n      var name = this.state.kind + '-' + this.state.node_name; // 노드종류를 이름 앞에 붙여 서버로 보냄 (ex. trashcan-trashcanNode1)\n      // Valid check (unvalid -> alert)\n\n      if (!this.state.nameValid) {\n        alert('Please enter node name.');\n        return;\n      }\n\n      if (!this.state.kindValid) {\n        alert('Please select more than a node kind.');\n        return;\n      }\n\n      if (!this.state.valueValid) {\n        alert('Please select more than a sensor.');\n        return;\n      }\n\n      if (!this.state.sinkValid) {\n        alert('Please enter sink.');\n        return;\n      }\n\n      if (!this.state.stationValid) {\n        alert('Please confirm station');\n        return;\n      } // Check whether user really want to submit\n\n\n      var submitValid;\n      submitValid = window.confirm('Are you sure to register this node?');\n\n      if (!submitValid) {\n        return;\n      }\n\n      console.log(JSON.stringify({\n        name: name,\n        lat: data.location.lat,\n        lng: data.location.lng\n      }));\n      var kind;\n\n      if (data.kind == 'station') {\n        kind = 'STA';\n      } else if (data.kind == 'drone') {\n        kind = 'DRO' + '-';\n      } else {\n        kind = 'TAG';\n      }\n\n      fetch(url, {\n        method: 'POST',\n        // or 'PUT'\n        body: JSON.stringify({\n          name: name,\n          lat: data.location.lat,\n          lng: data.location.lng,\n          sink_id: data.sink_id,\n          sensor_values: data.valueList,\n          type: kind,\n          station_id: data.station_id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(response => console.log('Success:', JSON.stringify(response))).catch(error => console.error('Error:', error)).then(() => window.location.reload(false)); // nodeList will change so reload for reflecting change\n    };\n  }\n\n  componentDidMount() {\n    this.getsinkList();\n  } // Get sink list from backend\n\n\n  getsinkList() {\n    var url = SINK_URL;\n    fetch(url).then(res => res.json()).then(data => this.setState({\n      sinkList: data\n    })).catch(error => console.error('Error:', error));\n  } // Handle node name change by typing\n\n\n  render() {\n    let sinkOptions;\n    sinkOptions = this.state.sinkList.map(val => {\n      return {\n        label: val.name,\n        value: val.name,\n        id: val.id\n      };\n    });\n    let nodes;\n    let temp;\n    nodes = [];\n    temp = {\n      label: '',\n      id: 0\n    };\n\n    for (var i = 0; i < this.state.sinkList.length; i++) {\n      if (this.state.sinkList[i].name == 'station-sink') {\n        nodes = this.state.sinkList[i].nodes;\n      }\n    }\n\n    let stationOptions;\n    stationOptions = nodes && nodes.map(val => {\n      return {\n        label: val.name,\n        value: val.name,\n        id: val.id\n      };\n    });\n    let nodeOptions = [{\n      label: 'drone',\n      value: 'drone'\n    }, {\n      label: 'station',\n      value: 'station'\n    }, {\n      label: 'tag',\n      value: 'tag'\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"register-node-modal\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"register-node-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog  modal-lg\",\n      role: \"document\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"modal-title\",\n      id: \"register-node-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }\n    }, \"Register node\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 10\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }\n    }, \"Node name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"node_name\",\n      placeholder: \"name\",\n      value: this.state.node_name,\n      onChange: this.handleNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }\n    }, \"location\"), /*#__PURE__*/React.createElement(LarLngPicker, {\n      handleLarLngChange: this.handleLarLngChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }\n    }, \"Select Node\"), /*#__PURE__*/React.createElement(Select, {\n      options: nodeOptions,\n      name: \"action\",\n      classNamePrefix: \"select\",\n      onChange: this.handleKindChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 11\n      }\n    }, \"Register sensors\"), this.state.valueList.map((value, idx) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 15\n      }\n    }, idx)), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"sensor_values\",\n      placeholder: 'Enter value name',\n      value: value.value_name,\n      onChange: this.handleValueChange(idx),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 14\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-secondary btn-sm\",\n      type: \"button\",\n      id: \"button-addon2\",\n      onClick: this.handleRemoveClick(idx),\n      style: {\n        background: 'light'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      className: \"bi bi-trash-fill\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 17\n      }\n    }))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn\",\n      onClick: this.handleAddClick,\n      style: {\n        background: '#82CAFA',\n        color: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }\n    }, \"Add value\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }\n    }, \"Select sink\"), /*#__PURE__*/React.createElement(Select, {\n      className: \"basic-select\",\n      name: \"sink\",\n      options: sinkOptions,\n      classNamePrefix: \"select\",\n      onChange: this.handleSinkChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 11\n      }\n    }, \"Select station\"), /*#__PURE__*/React.createElement(Select, {\n      className: \"basic-select\",\n      name: \"station\",\n      options: stationOptions,\n      classNamePrefix: \"select\",\n      onChange: this.handleStationChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn my-2 my-sm-0\",\n      onClick: this.handleSubmit,\n      style: {\n        background: '#82CAFA',\n        color: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 11\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"reset\",\n      className: \"btn btn-default\",\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 11\n      }\n    }, \"Cancel\"))))))));\n  }\n\n}\n\nexport default RegisterNode;","map":{"version":3,"sources":["/home/seungmin/ncgo/ui/src/ManagementComponents/Register/RegisterNode.tsx"],"names":["React","Component","Select","NODE_URL","SINK_URL","LarLngPicker","RegisterNode","state","sinkList","valueList","node_name","kind","location","lng","lat","alt","sink_id","station_id","nameValid","kindValid","valueValid","sinkValid","stationValid","nodeList","handleNameChange","e","target","value","length","setState","handleKindChange","nodeKind","DroneOption","value_name","StationOption","handleLarLngChange","handleSinkChange","sink","id","handleStationChange","station","handleValueChange","idx","newsensor_values","map","sidx","some","handleRemoveClick","filter","s","handleAddClick","handleSubmit","preventDefault","url","data","name","alert","submitValid","window","confirm","console","log","JSON","stringify","fetch","method","body","sensor_values","type","headers","then","res","json","response","catch","error","reload","componentDidMount","getsinkList","render","sinkOptions","val","label","nodes","temp","i","stationOptions","nodeOptions","background","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Select from 'react-select';\nimport {\n\tvalue_list_elem,\n\tsinkListElem,\n\tsinkOptionsElem,\n\tlocationElem,\n\ttagOptionsElem,\n\tnodeListElem,\n} from '../../ElemInterface/ElementsInterface';\nimport { NODE_URL, SINK_URL} from '../../defineUrl';\nimport LarLngPicker from '../LatLngPicker';\n// react-select : https://github.com/JedWatson/react-select\n\ninterface RegisterNodeState {\n\tsinkList: Array<sinkListElem>;\n\tvalueList: Array<value_list_elem>;\n\n\tnode_name: string;\n\tkind: string;\n\tlocation: locationElem;\n\tsink_id: number;\n\tstation_id: number;\n\tnameValid: boolean;\n\tkindValid: boolean;\n\tvalueValid: boolean;\n\tsinkValid: boolean;\n\tstationValid: boolean;\n\n\tnodeList: Array<nodeListElem>;\n}\n\ninterface nodeOptionsElem {\n\tlabel: string;\n\tvalue: string;\n}\n\n/*\nRegisterNode\n- Show modal to register node\n*/\n\nclass RegisterNode extends Component<{}, RegisterNodeState> {\n\tstate: RegisterNodeState = {\n\t\tsinkList: [],\n\t\tvalueList: [],\n\n\t\tnode_name: '',\n\t\tkind: '',\n\t\tlocation: {\n\t\t\tlng: 0,\n\t\t\tlat: 0,\n\t\t\talt: 0,\n\t\t},\n\t\tsink_id: 0,\n\t\tstation_id: 0,\n\n\t\tnameValid: false,\n\t\tkindValid: false,\n\t\tvalueValid: false,\n\t\tsinkValid: false,\n\t\tstationValid: false,\n\n\t\tnodeList: [],\n\t};\n\tcomponentDidMount() {\n\t\tthis.getsinkList();\n\t}\n\n\t// Get sink list from backend\n\tgetsinkList() {\n\t\tvar url = SINK_URL;\n\n\t\tfetch(url)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => this.setState({ sinkList: data }))\n\t\t\t.catch((error) => console.error('Error:', error));\n\t}\n\n\t// Handle node name change by typing\n\thandleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t// name valid check : user should enter node name\n\t\tif (e.target.value.length > 0) {\n\t\t\tthis.setState({\n\t\t\t\tnode_name: e.target.value,\n\t\t\t\tnameValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tnode_name: e.target.value,\n\t\t\t\tnameValid: false,\n\t\t\t});\n\t\t}\n\t};\n\n\t// 노드 종류에 따라 마커이미지 다르게 나타나기 위해 사용자로부터 노드 종류 받음.\n\thandleKindChange = (nodeKind: any) => {\n\t\tif (nodeKind !== null) {\n\t\t\tthis.setState({\n\t\t\t\tkind: nodeKind.value,\n\t\t\t\tkindValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tkind: nodeKind.value,\n\t\t\t\tkindValid: false,\n\t\t\t});\n\t\t}\n\n\t\tif (nodeKind.value == 'drone'){\n\t\t\tlet DroneOption: Array<value_list_elem> = [\n\t\t\t\t{ value_name: 'battery'}, {value_name: 'gps'}, {value_name: 'atm'}, {value_name: 'accelerate'}, {value_name: 'speed'}\n\t\t\t];\n\t\t\tthis.setState({\n\t\t\t\tvalueList: DroneOption,\n\t\t\t\tvalueValid:true,\n\t\t\t});\n\t\t}\n\t\tif (nodeKind.value == 'station'){\n\t\t\tlet StationOption: Array<value_list_elem> = [\n\t\t\t\t{value_name: 'gps'}, {value_name: 'ultrasonic'}\n\t\t\t];\n\t\t\tthis.setState({\n\t\t\t\tvalueList: StationOption,\n\t\t\t\tvalueValid:true,\n\t\t\t\tstationValid:true,\n\t\t\t});\n\t\t}\n\t\tif (nodeKind.value == 'tag'){\n\t\t\tthis.setState({\n\t\t\t\tvalueValid:true,\n\t\t\t\tstationValid:true,\n\t\t\t})\n\t\t} \n\t}\n\n\t// Handle LarLng change by pick lat, lng at map\n\thandleLarLngChange = (location: locationElem) => {\n\t\tthis.setState({\n\t\t\tlocation,\n\t\t});\n\t};\n\n\t// Handle selected sink change by selecting sink\n\thandleSinkChange = (sink: any) => {\n\t\t// sink valid check : user should select sink\n\t\tif (sink !== null) {\n\t\t\tthis.setState({\n\t\t\t\tsink_id: sink.id,\n\t\t\t\tsinkValid: true,\n\t\t\t});\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tsink_id: sink.id,\n\t\t\t\tsinkValid: false,\n\t\t\t});\n\t\t}\n\t};\n\n\thandleStationChange = (station: any) => {\n\t\tif (this.state.kind == 'drone')\n\t\t{\n\t\t\tif (station !== null)\n\t\t\t{\n\t\t\t\tthis.setState({\n\t\t\t\t\tstation_id: station.id,\n\t\t\t\t\tstationValid: true,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setState({\n\t\t\t\t\tstation_id: station.id,\n\t\t\t\t\tstationValid: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse \n\t\t{\n\t\t\tif (station !== null)\n\t\t\t{\n\t\t\t\tthis.setState({\n\t\t\t\t\tstation_id: station.id,\n\t\t\t\t\tstationValid: false,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setState({\n\t\t\t\t\tstation_id: station.id,\n\t\t\t\t\tstationValid: true,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\thandleValueChange = (idx: number) => (\n\t\te: React.ChangeEvent<HTMLInputElement>\n\t) => {\n\t\t// Value list is updated dynamic. Its element can be added or removed freely.\n\t\t// so find changing field by using received idx and change state.\n\t\tconst newsensor_values = this.state.valueList.map(\n\t\t\t(value: value_list_elem, sidx: number) => {\n\t\t\t\tif (idx !== sidx) return value;\n\t\t\t\treturn { ...value, value_name: e.target.value };\n\t\t\t}\n\t\t);\n\n\t\t// value list valid check : User should enter more than a value and each value input field should be filled\n\t\tif (\n\t\t\tnewsensor_values !== null &&\n\t\t\t!newsensor_values.some((value) => value.value_name === '') && // find empty field\n\t\t\tnewsensor_values[idx].value_name.length > 0\n\t\t) {\n\t\t\tthis.setState({ valueList: newsensor_values, valueValid: true });\n\t\t} else {\n\t\t\tthis.setState({ valueList: newsensor_values, valueValid: false });\n\t\t}\n\t};\n\n\thandleRemoveClick = (idx: number) => () => {\n\t\t// Remove #idx value list elem which user picked\n\t\tthis.setState({\n\t\t\tvalueList: this.state.valueList.filter(\n\t\t\t\t(s: any, sidx: number) => idx !== sidx\n\t\t\t),\n\t\t});\n\t};\n\n\thandleAddClick = () => {\n\t\t// Add a value list elem\n\t\tthis.setState({\n\t\t\tvalueList: [...this.state.valueList, {value_name: ''}],\n\t\t});\n\t};\n\n\t// Handle submit button click event\n\thandleSubmit = (e: React.MouseEvent<HTMLButtonElement>) => {\n\t\te.preventDefault();\n\n\t\tvar url = NODE_URL;\n\t\tvar data = this.state;\n\t\tvar name = this.state.kind + '-' + this.state.node_name;     // 노드종류를 이름 앞에 붙여 서버로 보냄 (ex. trashcan-trashcanNode1)\n\n\t\t// Valid check (unvalid -> alert)\n\t\tif (!this.state.nameValid) {\n\t\t\talert('Please enter node name.');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.state.kindValid) {\n\t\t\talert('Please select more than a node kind.');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.state.valueValid) {\n\t\t\talert('Please select more than a sensor.');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.state.sinkValid) {\n\t\t\talert('Please enter sink.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.state.stationValid) {\n\t\t\talert('Please confirm station');\n\t\t\treturn;\n\t\t}\n\n\t\t// Check whether user really want to submit\n\t\tvar submitValid: boolean;\n\t\tsubmitValid = window.confirm('Are you sure to register this node?');\n\t\tif (!submitValid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\n\t\t\tJSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\tlat: data.location.lat,\n\t\t\t\tlng: data.location.lng,\n\t\t\t})\n\t\t);\n\n\t\tvar kind:string;\n\t\tif (data.kind == 'station')\n\t\t{\n\t\t\tkind = 'STA';\n\t\t}\n\t\telse if (data.kind == 'drone')\n\t\t{\n\t\t\tkind = 'DRO' + '-';\n\t\t}\n\t\telse{\n\t\t\tkind = 'TAG';\n\t\t}\n\n\t\tfetch(url, {\n\t\t\tmethod: 'POST', // or 'PUT'\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\tlat: data.location.lat,\n\t\t\t\tlng: data.location.lng,\n\t\t\t\tsink_id: data.sink_id,\n\t\t\t\tsensor_values: data.valueList,\n\t\t\t\ttype: kind,\n\t\t\t\tstation_id: data.station_id,\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((response) => console.log('Success:', JSON.stringify(response)))\n\t\t\t.catch((error) => console.error('Error:', error))\n\t\t\t.then(() => window.location.reload(false)); // nodeList will change so reload for reflecting change\n\t};\n\n\trender() {\n\t\tlet sinkOptions: Array<sinkOptionsElem>;\n\t\tsinkOptions = this.state.sinkList.map((val: sinkListElem) => {\n\t\t\treturn { label: val.name, value: val.name, id: val.id };\n\t\t});\n\t\t\n\t\tlet nodes: Array<nodeListElem>;\n\t\tlet temp: tagOptionsElem;\n\t\tnodes = [];\n\t\ttemp = {label:'', id:0};\n\n\t\tfor(var i = 0; i < this.state.sinkList.length; i++)\n\t\t{\n\t\t\tif(this.state.sinkList[i].name == 'station-sink')\n\t\t\t{\n\t\t\t\tnodes = this.state.sinkList[i].nodes;\n\t\t\t}\n\t\t}\n\t\t\n\t\tlet stationOptions: Array<sinkOptionsElem>;\n\t\tstationOptions = nodes && nodes.map((val: nodeListElem) => {\n\t\t\treturn { label: val.name, value: val.name, id: val.id };\n\t\t});\n\t\t\n\t\tlet nodeOptions: Array<nodeOptionsElem> = [\n\t\t\t{ label: 'drone', value: 'drone'}, \n\t\t\t{ label: 'station', value: 'station' },\n\t\t\t{ label: 'tag', value: 'tag'}, \n\t\t];\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"modal fade\"\n\t\t\t\t\tid=\"register-node-modal\"\n\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\taria-labelledby=\"register-node-modal\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"modal-dialog  modal-lg\" role=\"document\">\n\t\t\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t\t\t<h4 className=\"modal-title\" id=\"register-node-modal\">\n\t\t\t\t\t\t\t\t\tRegister node\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"close\"\n\t\t\t\t\t\t\t\t\tdata-dismiss=\"modal\"\n\t\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">×</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Node name</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"node_name\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"name\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.node_name}\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<label>location</label>\n\t\t\t\t\t\t\t\t\t\t<LarLngPicker\n\t\t\t\t\t\t\t\t\t\t\thandleLarLngChange={this.handleLarLngChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Select Node</label>\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\toptions={nodeOptions}\n\t\t\t\t\t\t\t\t\t\t\tname=\"action\"\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleKindChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Register sensors</label>\n\t\t\t\t\t\t\t\t\t\t{this.state.valueList.map(\n\t\t\t\t\t\t\t\t\t\t\t(value: value_list_elem, idx: number) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group mb-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group-prepend\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"input-group-text\">{idx}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"sensor_values\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={'Enter value name'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={value.value_name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleValueChange(idx)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"input-group-append\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-secondary btn-sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"button-addon2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleRemoveClick(idx)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: 'light' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twidth=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\theight=\"1em\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bi bi-trash-fill\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleAddClick}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: '#82CAFA', color : 'white' }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tAdd value\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Select sink</label>\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"basic-select\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"sink\"\n\t\t\t\t\t\t\t\t\t\t\toptions={sinkOptions}\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleSinkChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t\t<label>Select station</label>\n\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"basic-select\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"station\"\n\t\t\t\t\t\t\t\t\t\t\toptions={stationOptions}\n\t\t\t\t\t\t\t\t\t\t\tclassNamePrefix=\"select\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleStationChange}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"modal-footer\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn my-2 my-sm-0\" \n\t\t\t\t\t\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: '#82CAFA', color : 'white' }}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"reset\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t\t\tdata-dismiss=\"modal\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default RegisterNode;\n\n\n"]},"metadata":{},"sourceType":"module"}