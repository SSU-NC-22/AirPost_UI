{"ast":null,"code":"var _jsxFileName = \"/home/seungmin/ncgo/ui/src/CMap.tsx\";\nimport React, { Component } from 'react';\nimport './ManagementComponents/NodeMap.css';\nimport { NODE_URL } from './defineUrl';\n\nclass NodeMap extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      nodeList: [],\n      map: {},\n      left: 126.93120847993194,\n      right: 126.9814068917757,\n      up: 37.504736714448086,\n      down: 37.48669801512536,\n      stationList: []\n    };\n\n    this.componentDidMount = () => {\n      var mapContainer = document.getElementById('node_map'); // ������ ǥ���� div\n\n      var mapOption = {\n        center: new window.kakao.maps.LatLng(37.49575158172499, 126.95633291769067),\n        // ������ �߽���ǥ\n        level: 3 // ������ Ȯ�� ����\n\n      }; // ������ �����մϴ�\n\n      var map = new window.kakao.maps.Map(mapContainer, mapOption);\n      mapContainer.style.height = '730px';\n      mapContainer.style.width = ' 800px';\n      map.relayout();\n      this.setState({\n        map: map\n      });\n      this.getnodeList(this.state.left, this.state.right, this.state.up, this.state.down); // �巡�װ� ���� �� or Ȯ�� ������ ����Ǹ�\n\n      window.kakao.maps.event.addListener(map, 'idle', () => {\n        // ������ ���� ������ ���ɴϴ�\n        var bounds = map.getBounds(); // ������ ������ ��ǥ�� ���ɴϴ�\n\n        var swLatLng = bounds.getSouthWest(); // ������ �ϵ��� ��ǥ�� ���ɴϴ�\n\n        var neLatLng = bounds.getNorthEast();\n        this.setState({\n          left: swLatLng.getLng(),\n          // left\n          right: neLatLng.getLng(),\n          // right\n          up: neLatLng.getLat(),\n          // up\n          down: swLatLng.getLat() // down\n\n        });\n        this.getnodeList(swLatLng.getLng(), // left\n        neLatLng.getLng(), // right\n        neLatLng.getLat(), // up\n        swLatLng.getLat() // down\n        );\n      });\n      var positions = this.state.nodeList.map(node => {\n        return {\n          title: node.name.split('-')[1],\n          kind: node.name.split('-')[0],\n          id: node.id,\n          content: ['sink : ' + node.sink_id, 'id : ' + node.id, 'sensor : ' + node.sensor_values.map(sensor => sensor.value_name + ', ')],\n          latlng: new window.kakao.maps.LatLng(node.lat, node.lng)\n        };\n      });\n\n      for (var i = 0; i < positions.length; i++) {\n        this.displayMarker(positions[i], this.state.map);\n\n        if (positions[i].kind == 'station') {\n          var tagList;\n          tagList = {\n            label: '',\n            id: 0\n          };\n          tagList.id = positions[i].id;\n          tagList.label = positions[i].title; // this.setState({stationList: this.state.stationList.concat(tagList)});\n          // this.props.getsourceList(tagList);\n        }\n      }\n    };\n  }\n\n  // Get node list from backend\n  getnodeList(left, right, up, down) {\n    var url = NODE_URL + '?left=' + left + '&right=' + right + '&up=' + up + '&down=' + down;\n    fetch(url).then(res => res.json()).then(data => this.setState({\n      nodeList: data\n    })).catch(error => console.error('Error:', error));\n  }\n\n  setTag(data) {\n    this.props.getsourceList(data);\n  } // Make Marker\n\n\n  displayMarker(position, map) {\n    // ��Ŀ�� �����մϴ�\n\n    /*var marker = new window.kakao.maps.Marker({\r\n    \tmap: map, // ��Ŀ�� ǥ���� ����\r\n    \tposition: position.latlng, // ��Ŀ�� ��ġ\r\n    });*/\n    var stationmarker = this.addstationMarker(position, map);\n    var dronemarker = this.adddroneMarker(position, map);\n    var tagmarker = this.addtagMarker(position, map);\n    var tag;\n    tag = {\n      label: '',\n      id: 0\n    };\n    tag.label = position.title;\n    tag.id = position.id; // ��Ŀ�� ǥ���� custom overlay�� �����մϴ�\n\n    if (stationmarker != null) {\n      var ScustomOverlay = new window.kakao.maps.CustomOverlay({\n        position: stationmarker.getPosition()\n      });\n      var Scontent = document.createElement('div');\n      var Stitle = document.createElement('div');\n      Stitle.innerHTML = 'station for start point';\n      Stitle.className = 'title';\n      Stitle.setAttribute('style', 'background: #82CAFA;');\n      var ScloseBtn = document.createElement('button');\n\n      ScloseBtn.onclick = function () {\n        ScustomOverlay.setMap(null);\n      };\n\n      ScloseBtn.className = 'close';\n      ScloseBtn.type = 'button';\n      Stitle.appendChild(ScloseBtn);\n      var Sbody = document.createElement('div');\n      var SbodytextAv = document.createElement('div');\n      var SbodytextBa = document.createElement('div');\n      SbodytextAv.appendChild(document.createTextNode('Available: O'));\n      Sbody.insertAdjacentElement('beforeend', SbodytextAv);\n      Sbody.insertAdjacentElement('beforeend', SbodytextBa);\n      var SbodyElem = document.createElement('button');\n      SbodyElem.className = 'btn';\n      SbodyElem.setAttribute('style', 'background: #82CAFA; color : white; margin: 10px 0 0 0; font-size: 18px; padding: 0 5px');\n      SbodyElem.appendChild(document.createTextNode('set this station to start point'));\n\n      SbodyElem.onclick = () => Sbody.insertAdjacentElement('beforeend', SbodyElem);\n\n      Sbody.className = 'body';\n      Sbody.setAttribute('style', 'margin: 7px 0 0 0; font-size: 18px');\n      var Sinfo = document.createElement('div');\n      Sinfo.className = 'info';\n      Sinfo.insertAdjacentElement('afterbegin', Stitle);\n      var Swrap = document.createElement('div');\n      Swrap.className = 'wrap';\n      Swrap.insertAdjacentElement('afterbegin', Sinfo);\n      ScloseBtn.insertAdjacentElement('afterend', Sbody);\n      Scontent.insertAdjacentElement('afterbegin', Swrap);\n      ScustomOverlay.setContent(Scontent);\n      window.kakao.maps.event.addListener(stationmarker, 'click', function () {\n        ScustomOverlay.setMap(map);\n      });\n    }\n\n    if (tagmarker != null) {\n      var TcustomOverlay = new window.kakao.maps.CustomOverlay({\n        position: tagmarker.getPosition()\n      });\n      var Tcontent = document.createElement('div');\n      var Ttitle = document.createElement('div');\n      Ttitle.innerHTML = 'tag for end point';\n      Ttitle.className = 'title';\n      Ttitle.setAttribute('style', 'background: #82CAFA;');\n      var TcloseBtn = document.createElement('button');\n\n      TcloseBtn.onclick = function () {\n        TcustomOverlay.setMap(null);\n      };\n\n      TcloseBtn.className = 'close';\n      TcloseBtn.type = 'button';\n      Ttitle.appendChild(TcloseBtn);\n      var Tbody = document.createElement('div');\n      var TbodytextAv = document.createElement('div');\n      TbodytextAv.appendChild(document.createTextNode('Available: O'));\n      Tbody.insertAdjacentElement('beforeend', TbodytextAv);\n      var TbodyElem = document.createElement('button');\n      TbodyElem.className = 'btn';\n      TbodyElem.setAttribute('style', 'background: #82CAFA; color : white; margin: 10px 0 0 0; font-size: 18px; padding: 0 22px');\n      TbodyElem.appendChild(document.createTextNode('set this tag to end point'));\n      Tbody.insertAdjacentElement('beforeend', TbodyElem);\n      Tbody.className = 'body';\n      Tbody.setAttribute('style', 'margin: 7px 0 0 0; font-size: 18px');\n      var Tinfo = document.createElement('div');\n      Tinfo.className = 'info';\n      Tinfo.insertAdjacentElement('afterbegin', Ttitle);\n      var Twrap = document.createElement('div');\n      Twrap.className = 'wrap';\n      Twrap.insertAdjacentElement('afterbegin', Tinfo);\n      TcloseBtn.insertAdjacentElement('afterend', Tbody);\n      Tcontent.insertAdjacentElement('afterbegin', Twrap);\n      TcustomOverlay.setContent(Tcontent);\n      window.kakao.maps.event.addListener(tagmarker, 'click', function () {\n        TcustomOverlay.setMap(map);\n      });\n    }\n\n    if (dronemarker != null) {\n      var DcustomOverlay = new window.kakao.maps.CustomOverlay({\n        position: dronemarker.getPosition()\n      });\n      window.kakao.maps.event.addListener(dronemarker, 'click', function () {\n        DcustomOverlay.setMap(map);\n      });\n    }\n  } // ��Ŀ �̹��� �� ũ�� ���� \n  // ��� ������ ���� ���� �� ��Ŀ�̹��� �ٸ��� ǥ��\n\n\n  addstationMarker(position, map) {\n    if (position.kind === 'station') {\n      var imageSrc = 'https://user-images.githubusercontent.com/68888653/126869445-228df4e6-6496-4597-b12e-7a0dd11a12d8.png';\n      var imageSize = new window.kakao.maps.Size(30, 40),\n          markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize),\n          //markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),\n      marker = new window.kakao.maps.Marker({\n        map: map,\n        position: position.latlng,\n        // ��Ŀ�� ��ġ\n        image: markerImage\n      });\n      return marker;\n    }\n\n    return null;\n  }\n\n  addtagMarker(position, map) {\n    if (position.kind === 'tag') {\n      var imageSrc = 'https://user-images.githubusercontent.com/68888653/131796807-2d320e22-d43f-4cdb-9925-a367f14aeca2.png';\n      var imageSize = new window.kakao.maps.Size(30, 40),\n          markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize),\n          //markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),\n      marker = new window.kakao.maps.Marker({\n        map: map,\n        position: position.latlng,\n        // ��Ŀ�� ��ġ\n        image: markerImage\n      });\n      return marker;\n    }\n\n    return null;\n  }\n\n  adddroneMarker(position, map) {\n    if (position.kind === 'drone') {\n      var imageSrc = 'https://user-images.githubusercontent.com/68888653/126869406-4d22668f-04df-44e2-a952-6c4f7f9bc15d.png';\n      var imageSize = new window.kakao.maps.Size(30, 40),\n          markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize),\n          //markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),\n      marker = new window.kakao.maps.Marker({\n        map: map,\n        position: position.latlng,\n        // ��Ŀ�� ��ġ\n        image: markerImage\n      });\n      return marker;\n    }\n  }\n\n  render() {\n    var positions = this.state.nodeList.map(node => {\n      return {\n        title: node.name.split('-')[1],\n        kind: node.name.split('-')[0],\n        id: node.id,\n        content: ['sink : ' + node.sink_id, 'id : ' + node.id, 'sensor : ' + node.sensor_values.map(sensor => sensor.value_name + ', ')],\n        latlng: new window.kakao.maps.LatLng(node.lat, node.lng)\n      };\n    });\n\n    for (var i = 0; i < positions.length; i++) {\n      this.displayMarker(positions[i], this.state.map);\n\n      if (positions[i].kind == 'station') {\n        var tagList;\n        tagList = {\n          label: '',\n          id: 0\n        };\n        tagList.id = positions[i].id;\n        tagList.label = positions[i].title; // this.setState({stationList: this.state.stationList.concat(tagList)});\n        // this.props.getsourceList(tagList);\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"node_map\",\n      style: {\n        width: '100%',\n        height: '500px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 6\n      }\n    })));\n  }\n\n}\n\nexport default NodeMap;","map":{"version":3,"sources":["/home/seungmin/ncgo/ui/src/CMap.tsx"],"names":["React","Component","NODE_URL","NodeMap","state","nodeList","map","left","right","up","down","stationList","componentDidMount","mapContainer","document","getElementById","mapOption","center","window","kakao","maps","LatLng","level","Map","style","height","width","relayout","setState","getnodeList","event","addListener","bounds","getBounds","swLatLng","getSouthWest","neLatLng","getNorthEast","getLng","getLat","positions","node","title","name","split","kind","id","content","sink_id","sensor_values","sensor","value_name","latlng","lat","lng","i","length","displayMarker","tagList","label","url","fetch","then","res","json","data","catch","error","console","setTag","props","getsourceList","position","stationmarker","addstationMarker","dronemarker","adddroneMarker","tagmarker","addtagMarker","tag","ScustomOverlay","CustomOverlay","getPosition","Scontent","createElement","Stitle","innerHTML","className","setAttribute","ScloseBtn","onclick","setMap","type","appendChild","Sbody","SbodytextAv","SbodytextBa","createTextNode","insertAdjacentElement","SbodyElem","Sinfo","Swrap","setContent","TcustomOverlay","Tcontent","Ttitle","TcloseBtn","Tbody","TbodytextAv","TbodyElem","Tinfo","Twrap","DcustomOverlay","imageSrc","imageSize","Size","markerImage","MarkerImage","marker","Marker","image","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,oCAAP;AACA,SAASC,QAAT,QAAyB,aAAzB;;AAoCA,MAAMC,OAAN,SAAsBF,SAAtB,CAA4D;AAAA;AAAA;AAAA,SAC3DG,KAD2D,GACrC;AACrBC,MAAAA,QAAQ,EAAE,EADW;AAErBC,MAAAA,GAAG,EAAE,EAFgB;AAGrBC,MAAAA,IAAI,EAAE,kBAHe;AAIrBC,MAAAA,KAAK,EAAE,iBAJc;AAKrBC,MAAAA,EAAE,EAAE,kBALiB;AAMrBC,MAAAA,IAAI,EAAE,iBANe;AAOrBC,MAAAA,WAAW,EAAE;AAPQ,KADqC;;AAAA,SAU3DC,iBAV2D,GAUvC,MAAM;AACzB,UAAIC,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAnB,CADyB,CAC+B;;AACxD,UAAIC,SAAS,GAAG;AACfC,QAAAA,MAAM,EAAE,IAAIC,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBC,MAAtB,CACP,iBADO,EAEP,kBAFO,CADO;AAIZ;AACHC,QAAAA,KAAK,EAAE,CALQ,CAKL;;AALK,OAAhB,CAFyB,CAUzB;;AACA,UAAIhB,GAAG,GAAG,IAAIY,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBG,GAAtB,CAA0BV,YAA1B,EAAwCG,SAAxC,CAAV;AACAH,MAAAA,YAAY,CAAEW,KAAd,CAAoBC,MAApB,GAA6B,OAA7B;AACAZ,MAAAA,YAAY,CAAEW,KAAd,CAAoBE,KAApB,GAA4B,QAA5B;AACApB,MAAAA,GAAG,CAACqB,QAAJ;AACA,WAAKC,QAAL,CAAc;AAAEtB,QAAAA,GAAG,EAAEA;AAAP,OAAd;AAEA,WAAKuB,WAAL,CACC,KAAKzB,KAAL,CAAWG,IADZ,EAEC,KAAKH,KAAL,CAAWI,KAFZ,EAGC,KAAKJ,KAAL,CAAWK,EAHZ,EAIC,KAAKL,KAAL,CAAWM,IAJZ,EAjByB,CAwBzB;;AACAQ,MAAAA,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBU,KAAlB,CAAwBC,WAAxB,CAAoCzB,GAApC,EAAyC,MAAzC,EAAiD,MAAM;AACtD;AACA,YAAI0B,MAAM,GAAG1B,GAAG,CAAC2B,SAAJ,EAAb,CAFsD,CAItD;;AACA,YAAIC,QAAQ,GAAGF,MAAM,CAACG,YAAP,EAAf,CALsD,CAOtD;;AACA,YAAIC,QAAQ,GAAGJ,MAAM,CAACK,YAAP,EAAf;AAEA,aAAKT,QAAL,CAAc;AACbrB,UAAAA,IAAI,EAAE2B,QAAQ,CAACI,MAAT,EADO;AACY;AACzB9B,UAAAA,KAAK,EAAE4B,QAAQ,CAACE,MAAT,EAFM;AAEa;AAC1B7B,UAAAA,EAAE,EAAE2B,QAAQ,CAACG,MAAT,EAHS;AAGU;AACvB7B,UAAAA,IAAI,EAAEwB,QAAQ,CAACK,MAAT,EAJO,CAIY;;AAJZ,SAAd;AAOA,aAAKV,WAAL,CACCK,QAAQ,CAACI,MAAT,EADD,EACoB;AACnBF,QAAAA,QAAQ,CAACE,MAAT,EAFD,EAEoB;AACnBF,QAAAA,QAAQ,CAACG,MAAT,EAHD,EAGoB;AACnBL,QAAAA,QAAQ,CAACK,MAAT,EAJD,CAImB;AAJnB;AAMA,OAvBD;AAyBA,UAAIC,SAAS,GAAG,KAAKpC,KAAL,CAAWC,QAAX,CAAoBC,GAApB,CAAyBmC,IAAD,IAAwB;AAC/D,eAAO;AACNC,UAAAA,KAAK,EAAED,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CADD;AAENC,UAAAA,IAAI,EAAEJ,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAFA;AAGNE,UAAAA,EAAE,EAAEL,IAAI,CAACK,EAHH;AAINC,UAAAA,OAAO,EAAE,CACR,YAAYN,IAAI,CAACO,OADT,EAER,UAAUP,IAAI,CAACK,EAFP,EAGR,cACCL,IAAI,CAACQ,aAAL,CAAmB3C,GAAnB,CAAwB4C,MAAD,IAA6BA,MAAM,CAACC,UAAP,GAAkB,IAAtE,CAJO,CAJH;AAUNC,UAAAA,MAAM,EAAE,IAAIlC,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBC,MAAtB,CAA6BoB,IAAI,CAACY,GAAlC,EAAuCZ,IAAI,CAACa,GAA5C;AAVF,SAAP;AAYA,OAbe,CAAhB;;AAeA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,SAAS,CAACgB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AAC1C,aAAKE,aAAL,CAAmBjB,SAAS,CAACe,CAAD,CAA5B,EAAiC,KAAKnD,KAAL,CAAWE,GAA5C;;AAEA,YAAIkC,SAAS,CAACe,CAAD,CAAT,CAAaV,IAAb,IAAqB,SAAzB,EAAoC;AACnC,cAAIa,OAAJ;AACAA,UAAAA,OAAO,GAAG;AAACC,YAAAA,KAAK,EAAC,EAAP;AAAWb,YAAAA,EAAE,EAAC;AAAd,WAAV;AAEAY,UAAAA,OAAO,CAACZ,EAAR,GAAaN,SAAS,CAACe,CAAD,CAAT,CAAaT,EAA1B;AACAY,UAAAA,OAAO,CAACC,KAAR,GAAgBnB,SAAS,CAACe,CAAD,CAAT,CAAab,KAA7B,CALmC,CAOnC;AACA;AACA;AACD;AACD,KAzF0D;AAAA;;AA2F3D;AACAb,EAAAA,WAAW,CAACtB,IAAD,EAAeC,KAAf,EAA8BC,EAA9B,EAA0CC,IAA1C,EAAwD;AAClE,QAAIkD,GAAG,GACN1D,QAAQ,GACR,QADA,GAEAK,IAFA,GAGA,SAHA,GAIAC,KAJA,GAKA,MALA,GAMAC,EANA,GAOA,QAPA,GAQAC,IATD;AAUAmD,IAAAA,KAAK,CAACD,GAAD,CAAL,CACEE,IADF,CACQC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADhB,EAEEF,IAFF,CAEQG,IAAD,IAAU,KAAKrC,QAAL,CAAc;AAAEvB,MAAAA,QAAQ,EAAE4D;AAAZ,KAAd,CAFjB,EAGEC,KAHF,CAGSC,KAAD,IAAWC,OAAO,CAACD,KAAR,CAAc,QAAd,EAAwBA,KAAxB,CAHnB;AAIA;;AAEDE,EAAAA,MAAM,CAACJ,IAAD,EAAW;AAChB,SAAKK,KAAL,CAAWC,aAAX,CAAyBN,IAAzB;AACA,GA/G0D,CAiH3D;;;AACAR,EAAAA,aAAa,CAACe,QAAD,EAAgBlE,GAAhB,EAA0B;AACtC;;AACA;;;;AAKA,QAAImE,aAAa,GAAG,KAAKC,gBAAL,CAAsBF,QAAtB,EAAgClE,GAAhC,CAApB;AACA,QAAIqE,WAAW,GAAG,KAAKC,cAAL,CAAoBJ,QAApB,EAA8BlE,GAA9B,CAAlB;AACA,QAAIuE,SAAS,GAAG,KAAKC,YAAL,CAAkBN,QAAlB,EAA4BlE,GAA5B,CAAhB;AACA,QAAIyE,GAAJ;AACAA,IAAAA,GAAG,GAAG;AAACpB,MAAAA,KAAK,EAAC,EAAP;AAAWb,MAAAA,EAAE,EAAC;AAAd,KAAN;AACAiC,IAAAA,GAAG,CAACpB,KAAJ,GAAYa,QAAQ,CAAC9B,KAArB;AACAqC,IAAAA,GAAG,CAACjC,EAAJ,GAAS0B,QAAQ,CAAC1B,EAAlB,CAbsC,CAetC;;AACA,QAAI2B,aAAa,IAAI,IAArB,EAA2B;AAC1B,UAAIO,cAAc,GAAG,IAAI9D,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB6D,aAAtB,CAAoC;AACxDT,QAAAA,QAAQ,EAAEC,aAAa,CAACS,WAAd;AAD8C,OAApC,CAArB;AAIA,UAAIC,QAAQ,GAAGrE,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAf;AAEA,UAAIC,MAAM,GAAGvE,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAb;AACAC,MAAAA,MAAM,CAACC,SAAP,GAAmB,yBAAnB;AACAD,MAAAA,MAAM,CAACE,SAAP,GAAmB,OAAnB;AACAF,MAAAA,MAAM,CAACG,YAAP,CAAoB,OAApB,EAA6B,sBAA7B;AAEA,UAAIC,SAAS,GAAG3E,QAAQ,CAACsE,aAAT,CAAuB,QAAvB,CAAhB;;AAEAK,MAAAA,SAAS,CAACC,OAAV,GAAoB,YAAY;AAC/BV,QAAAA,cAAc,CAACW,MAAf,CAAsB,IAAtB;AACA,OAFD;;AAGAF,MAAAA,SAAS,CAACF,SAAV,GAAsB,OAAtB;AACAE,MAAAA,SAAS,CAACG,IAAV,GAAiB,QAAjB;AAEAP,MAAAA,MAAM,CAACQ,WAAP,CAAmBJ,SAAnB;AAEA,UAAIK,KAAK,GAAGhF,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAZ;AACA,UAAIW,WAAW,GAAGjF,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAlB;AACA,UAAIY,WAAW,GAAGlF,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAlB;AACAW,MAAAA,WAAW,CAACF,WAAZ,CAAwB/E,QAAQ,CAACmF,cAAT,CAAwB,cAAxB,CAAxB;AACAH,MAAAA,KAAK,CAACI,qBAAN,CAA4B,WAA5B,EAAyCH,WAAzC;AACAD,MAAAA,KAAK,CAACI,qBAAN,CAA4B,WAA5B,EAAyCF,WAAzC;AAEA,UAAIG,SAAS,GAAGrF,QAAQ,CAACsE,aAAT,CAAuB,QAAvB,CAAhB;AACAe,MAAAA,SAAS,CAACZ,SAAV,GAAsB,KAAtB;AACAY,MAAAA,SAAS,CAACX,YAAV,CAAuB,OAAvB,EAAgC,yFAAhC;AACAW,MAAAA,SAAS,CAACN,WAAV,CAAsB/E,QAAQ,CAACmF,cAAT,CAAwB,iCAAxB,CAAtB;;AAEAE,MAAAA,SAAS,CAACT,OAAV,GAAoB,MAEpBI,KAAK,CAACI,qBAAN,CAA4B,WAA5B,EAAyCC,SAAzC,CAFA;;AAIAL,MAAAA,KAAK,CAACP,SAAN,GAAkB,MAAlB;AACAO,MAAAA,KAAK,CAACN,YAAN,CAAmB,OAAnB,EAA4B,oCAA5B;AAEA,UAAIY,KAAK,GAAGtF,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAZ;AACAgB,MAAAA,KAAK,CAACb,SAAN,GAAkB,MAAlB;AACAa,MAAAA,KAAK,CAACF,qBAAN,CAA4B,YAA5B,EAA0Cb,MAA1C;AAEA,UAAIgB,KAAK,GAAGvF,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAZ;AACAiB,MAAAA,KAAK,CAACd,SAAN,GAAkB,MAAlB;AACAc,MAAAA,KAAK,CAACH,qBAAN,CAA4B,YAA5B,EAA0CE,KAA1C;AAEAX,MAAAA,SAAS,CAACS,qBAAV,CAAgC,UAAhC,EAA4CJ,KAA5C;AACAX,MAAAA,QAAQ,CAACe,qBAAT,CAA+B,YAA/B,EAA6CG,KAA7C;AACArB,MAAAA,cAAc,CAACsB,UAAf,CAA0BnB,QAA1B;AAEAjE,MAAAA,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBU,KAAlB,CAAwBC,WAAxB,CAAoC0C,aAApC,EAAmD,OAAnD,EAA4D,YAAY;AACvEO,QAAAA,cAAc,CAACW,MAAf,CAAsBrF,GAAtB;AACA,OAFD;AAGA;;AAED,QAAIuE,SAAS,IAAI,IAAjB,EAAuB;AACtB,UAAI0B,cAAc,GAAG,IAAIrF,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB6D,aAAtB,CAAoC;AACxDT,QAAAA,QAAQ,EAAEK,SAAS,CAACK,WAAV;AAD8C,OAApC,CAArB;AAIA,UAAIsB,QAAQ,GAAG1F,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAf;AAEA,UAAIqB,MAAM,GAAG3F,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAb;AACAqB,MAAAA,MAAM,CAACnB,SAAP,GAAmB,mBAAnB;AACAmB,MAAAA,MAAM,CAAClB,SAAP,GAAmB,OAAnB;AACAkB,MAAAA,MAAM,CAACjB,YAAP,CAAoB,OAApB,EAA6B,sBAA7B;AAEA,UAAIkB,SAAS,GAAG5F,QAAQ,CAACsE,aAAT,CAAuB,QAAvB,CAAhB;;AAEAsB,MAAAA,SAAS,CAAChB,OAAV,GAAoB,YAAY;AAC/Ba,QAAAA,cAAc,CAACZ,MAAf,CAAsB,IAAtB;AACA,OAFD;;AAGAe,MAAAA,SAAS,CAACnB,SAAV,GAAsB,OAAtB;AACAmB,MAAAA,SAAS,CAACd,IAAV,GAAiB,QAAjB;AAEAa,MAAAA,MAAM,CAACZ,WAAP,CAAmBa,SAAnB;AAEA,UAAIC,KAAK,GAAG7F,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAZ;AACA,UAAIwB,WAAW,GAAG9F,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAlB;AACAwB,MAAAA,WAAW,CAACf,WAAZ,CAAwB/E,QAAQ,CAACmF,cAAT,CAAwB,cAAxB,CAAxB;AACAU,MAAAA,KAAK,CAACT,qBAAN,CAA4B,WAA5B,EAAyCU,WAAzC;AAEA,UAAIC,SAAS,GAAG/F,QAAQ,CAACsE,aAAT,CAAuB,QAAvB,CAAhB;AACAyB,MAAAA,SAAS,CAACtB,SAAV,GAAsB,KAAtB;AACAsB,MAAAA,SAAS,CAACrB,YAAV,CAAuB,OAAvB,EAAgC,0FAAhC;AACAqB,MAAAA,SAAS,CAAChB,WAAV,CAAsB/E,QAAQ,CAACmF,cAAT,CAAwB,2BAAxB,CAAtB;AACAU,MAAAA,KAAK,CAACT,qBAAN,CAA4B,WAA5B,EAAyCW,SAAzC;AAEAF,MAAAA,KAAK,CAACpB,SAAN,GAAkB,MAAlB;AACAoB,MAAAA,KAAK,CAACnB,YAAN,CAAmB,OAAnB,EAA4B,oCAA5B;AAEA,UAAIsB,KAAK,GAAGhG,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAZ;AACA0B,MAAAA,KAAK,CAACvB,SAAN,GAAkB,MAAlB;AAEAuB,MAAAA,KAAK,CAACZ,qBAAN,CAA4B,YAA5B,EAA0CO,MAA1C;AAEA,UAAIM,KAAK,GAAGjG,QAAQ,CAACsE,aAAT,CAAuB,KAAvB,CAAZ;AACA2B,MAAAA,KAAK,CAACxB,SAAN,GAAkB,MAAlB;AAEAwB,MAAAA,KAAK,CAACb,qBAAN,CAA4B,YAA5B,EAA0CY,KAA1C;AACAJ,MAAAA,SAAS,CAACR,qBAAV,CAAgC,UAAhC,EAA4CS,KAA5C;AACAH,MAAAA,QAAQ,CAACN,qBAAT,CAA+B,YAA/B,EAA6Ca,KAA7C;AAEAR,MAAAA,cAAc,CAACD,UAAf,CAA0BE,QAA1B;AAEAtF,MAAAA,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBU,KAAlB,CAAwBC,WAAxB,CAAoC8C,SAApC,EAA+C,OAA/C,EAAwD,YAAY;AACnE0B,QAAAA,cAAc,CAACZ,MAAf,CAAsBrF,GAAtB;AACA,OAFD;AAGA;;AAED,QAAIqE,WAAW,IAAI,IAAnB,EAAyB;AACxB,UAAIqC,cAAc,GAAG,IAAI9F,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB6D,aAAtB,CAAoC;AACxDT,QAAAA,QAAQ,EAAEG,WAAW,CAACO,WAAZ;AAD8C,OAApC,CAArB;AAIAhE,MAAAA,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBU,KAAlB,CAAwBC,WAAxB,CAAoC4C,WAApC,EAAiD,OAAjD,EAA0D,YAAY;AACrEqC,QAAAA,cAAc,CAACrB,MAAf,CAAsBrF,GAAtB;AACA,OAFD;AAGA;AACD,GA5P0D,CA8P3D;AACA;;;AACAoE,EAAAA,gBAAgB,CAACF,QAAD,EAAgBlE,GAAhB,EAA0B;AACzC,QAAKkE,QAAQ,CAAC3B,IAAT,KAAkB,SAAvB,EAAiC;AAChC,UAAIoE,QAAQ,GAAG,uGAAf;AAEA,UAAIC,SAAS,GAAG,IAAIhG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB+F,IAAtB,CAA2B,EAA3B,EAAgC,EAAhC,CAAhB;AAAA,UACAC,WAAW,GAAG,IAAIlG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBiG,WAAtB,CAAkCJ,QAAlC,EAA4CC,SAA5C,CADd;AAAA,UAEA;AACCI,MAAAA,MAAM,GAAG,IAAIpG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBmG,MAAtB,CAA6B;AACtCjH,QAAAA,GAAG,EAAEA,GADiC;AAEtCkE,QAAAA,QAAQ,EAAEA,QAAQ,CAACpB,MAFmB;AAEX;AAC3BoE,QAAAA,KAAK,EAAEJ;AAH+B,OAA7B,CAHV;AAQA,aAAOE,MAAP;AACA;;AACD,WAAO,IAAP;AACA;;AAEDxC,EAAAA,YAAY,CAACN,QAAD,EAAgBlE,GAAhB,EAA0B;AACrC,QAAKkE,QAAQ,CAAC3B,IAAT,KAAkB,KAAvB,EAA8B;AAC7B,UAAIoE,QAAQ,GAAG,uGAAf;AAGA,UAAIC,SAAS,GAAG,IAAIhG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB+F,IAAtB,CAA2B,EAA3B,EAAgC,EAAhC,CAAhB;AAAA,UACAC,WAAW,GAAG,IAAIlG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBiG,WAAtB,CAAkCJ,QAAlC,EAA4CC,SAA5C,CADd;AAAA,UAEA;AACCI,MAAAA,MAAM,GAAG,IAAIpG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBmG,MAAtB,CAA6B;AACtCjH,QAAAA,GAAG,EAAEA,GADiC;AAEtCkE,QAAAA,QAAQ,EAAEA,QAAQ,CAACpB,MAFmB;AAEX;AAC3BoE,QAAAA,KAAK,EAAEJ;AAH+B,OAA7B,CAHV;AASA,aAAOE,MAAP;AACA;;AACD,WAAO,IAAP;AACA;;AAED1C,EAAAA,cAAc,CAACJ,QAAD,EAAgBlE,GAAhB,EAA0B;AACvC,QAAKkE,QAAQ,CAAC3B,IAAT,KAAmB,OAAxB,EAAiC;AAChC,UAAIoE,QAAQ,GAAG,uGAAf;AAEA,UAAIC,SAAS,GAAG,IAAIhG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkB+F,IAAtB,CAA2B,EAA3B,EAAgC,EAAhC,CAAhB;AAAA,UACAC,WAAW,GAAG,IAAIlG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBiG,WAAtB,CAAkCJ,QAAlC,EAA4CC,SAA5C,CADd;AAAA,UAEA;AACCI,MAAAA,MAAM,GAAG,IAAIpG,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBmG,MAAtB,CAA6B;AACtCjH,QAAAA,GAAG,EAAEA,GADiC;AAEtCkE,QAAAA,QAAQ,EAAEA,QAAQ,CAACpB,MAFmB;AAEX;AAC3BoE,QAAAA,KAAK,EAAEJ;AAH+B,OAA7B,CAHV;AAQD,aAAOE,MAAP;AACC;AACD;;AAEDG,EAAAA,MAAM,GAAG;AACR,QAAIjF,SAAS,GAAG,KAAKpC,KAAL,CAAWC,QAAX,CAAoBC,GAApB,CAAyBmC,IAAD,IAAwB;AAC/D,aAAO;AACNC,QAAAA,KAAK,EAAED,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CADD;AAENC,QAAAA,IAAI,EAAEJ,IAAI,CAACE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAFA;AAGNE,QAAAA,EAAE,EAAEL,IAAI,CAACK,EAHH;AAINC,QAAAA,OAAO,EAAE,CACR,YAAYN,IAAI,CAACO,OADT,EAER,UAAUP,IAAI,CAACK,EAFP,EAGR,cACCL,IAAI,CAACQ,aAAL,CAAmB3C,GAAnB,CAAwB4C,MAAD,IAA6BA,MAAM,CAACC,UAAP,GAAkB,IAAtE,CAJO,CAJH;AAUNC,QAAAA,MAAM,EAAE,IAAIlC,MAAM,CAACC,KAAP,CAAaC,IAAb,CAAkBC,MAAtB,CAA6BoB,IAAI,CAACY,GAAlC,EAAuCZ,IAAI,CAACa,GAA5C;AAVF,OAAP;AAYA,KAbe,CAAhB;;AAeA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,SAAS,CAACgB,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AAC1C,WAAKE,aAAL,CAAmBjB,SAAS,CAACe,CAAD,CAA5B,EAAiC,KAAKnD,KAAL,CAAWE,GAA5C;;AAEA,UAAIkC,SAAS,CAACe,CAAD,CAAT,CAAaV,IAAb,IAAqB,SAAzB,EAAoC;AACnC,YAAIa,OAAJ;AACAA,QAAAA,OAAO,GAAG;AAACC,UAAAA,KAAK,EAAC,EAAP;AAAWb,UAAAA,EAAE,EAAC;AAAd,SAAV;AAEAY,QAAAA,OAAO,CAACZ,EAAR,GAAaN,SAAS,CAACe,CAAD,CAAT,CAAaT,EAA1B;AACAY,QAAAA,OAAO,CAACC,KAAR,GAAgBnB,SAAS,CAACe,CAAD,CAAT,CAAab,KAA7B,CALmC,CAOnC;AACA;AACA;AACD;;AAED,wBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAK,MAAA,EAAE,EAAC,UAAR;AAAmB,MAAA,KAAK,EAAE;AAAEhB,QAAAA,KAAK,EAAE,MAAT;AAAiBD,QAAAA,MAAM,EAAE;AAAzB,OAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD,CADD;AAOA;;AA1V0D;;AA6V5D,eAAetB,OAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport './ManagementComponents/NodeMap.css';\r\nimport { NODE_URL } from './defineUrl';\r\nimport { tagOptionsElem } from './ElemInterface/ElementsInterface';\r\n\r\n// ���� : https://apis.map.kakao.com/web/sample/multipleMarkerEvent/\r\n\r\nimport {\r\n\tnodeListElem,\r\n\tvalue_list_elem,\r\n\tnodeHealthCheckElem,\r\n} from './ElemInterface/ElementsInterface';\r\nimport { makeArray } from 'jquery';\r\nimport { defaultProps } from 'react-select/src/Select';\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tkakao: any;\r\n\t}\r\n}\r\n\r\ninterface NodeMapProps {\r\n\thealthState: Map<number, number>;\r\n\tbatteryState: Map<number, number>;\r\n\tgetsourceList: Function;\r\n}\r\n\r\ninterface NodeMapState {\r\n\tnodeList: Array<nodeListElem>;\r\n\tmap: any;\r\n\tleft: number;\r\n\tright: number;\r\n\tup: number;\r\n\tdown: number;\r\n\tstationList: Array <tagOptionsElem>;\r\n}\r\n\r\n\r\nclass NodeMap extends Component<NodeMapProps, NodeMapState> {\r\n\tstate: NodeMapState = {\r\n\t\tnodeList: [],\r\n\t\tmap: {},\r\n\t\tleft: 126.93120847993194,\r\n\t\tright: 126.9814068917757,\r\n\t\tup: 37.504736714448086,\r\n\t\tdown: 37.48669801512536,\r\n\t\tstationList: [],\r\n\t};\r\n\tcomponentDidMount = () => {\r\n\t\tvar mapContainer = document.getElementById('node_map'); // ������ ǥ���� div\r\n\t\tvar mapOption = {\r\n\t\t\tcenter: new window.kakao.maps.LatLng(\r\n\t\t\t\t37.49575158172499,\r\n\t\t\t\t126.95633291769067\r\n\t\t\t), // ������ �߽���ǥ\r\n\t\t\tlevel: 3, // ������ Ȯ�� ����\r\n\t\t};\r\n\r\n\t\t// ������ �����մϴ�\r\n\t\tvar map = new window.kakao.maps.Map(mapContainer, mapOption);\r\n\t\tmapContainer!.style.height = '730px';\r\n\t\tmapContainer!.style.width = ' 800px';\r\n\t\tmap.relayout();\r\n\t\tthis.setState({ map: map });\r\n\r\n\t\tthis.getnodeList(\r\n\t\t\tthis.state.left,\r\n\t\t\tthis.state.right,\r\n\t\t\tthis.state.up,\r\n\t\t\tthis.state.down,\r\n\t\t);\r\n\r\n\t\t// �巡�װ� ���� �� or Ȯ�� ������ ����Ǹ�\r\n\t\twindow.kakao.maps.event.addListener(map, 'idle', () => {\r\n\t\t\t// ������ ���� ������ ���ɴϴ�\r\n\t\t\tvar bounds = map.getBounds();\r\n\r\n\t\t\t// ������ ������ ��ǥ�� ���ɴϴ�\r\n\t\t\tvar swLatLng = bounds.getSouthWest();\r\n\r\n\t\t\t// ������ �ϵ��� ��ǥ�� ���ɴϴ�\r\n\t\t\tvar neLatLng = bounds.getNorthEast();\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tleft: swLatLng.getLng(), // left\r\n\t\t\t\tright: neLatLng.getLng(), // right\r\n\t\t\t\tup: neLatLng.getLat(), // up\r\n\t\t\t\tdown: swLatLng.getLat(), // down\r\n\t\t\t});\r\n\r\n\t\t\tthis.getnodeList(\r\n\t\t\t\tswLatLng.getLng(), // left\r\n\t\t\t\tneLatLng.getLng(), // right\r\n\t\t\t\tneLatLng.getLat(), // up\r\n\t\t\t\tswLatLng.getLat() // down\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\tvar positions = this.state.nodeList.map((node: nodeListElem) => {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: node.name.split('-')[1],\r\n\t\t\t\tkind: node.name.split('-')[0],\r\n\t\t\t\tid: node.id,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t'sink : ' + node.sink_id,\r\n\t\t\t\t\t'id : ' + node.id,\r\n\t\t\t\t\t'sensor : ' +\r\n\t\t\t\t\t\tnode.sensor_values.map((sensor: value_list_elem) => sensor.value_name+', '),\r\n\t\t\t\t],\r\n\t\t\t\tlatlng: new window.kakao.maps.LatLng(node.lat, node.lng),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tfor (var i = 0; i < positions.length; i++) {\r\n\t\t\tthis.displayMarker(positions[i], this.state.map);\r\n\r\n\t\t\tif (positions[i].kind == 'station') {\r\n\t\t\t\tvar tagList:tagOptionsElem;\r\n\t\t\t\ttagList = {label:'', id:0};\r\n\r\n\t\t\t\ttagList.id = positions[i].id\r\n\t\t\t\ttagList.label = positions[i].title;\r\n\r\n\t\t\t\t// this.setState({stationList: this.state.stationList.concat(tagList)});\r\n\t\t\t\t// this.props.getsourceList(tagList);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t// Get node list from backend\r\n\tgetnodeList(left: number, right: number, up: number, down: number) {\r\n\t\tvar url =\r\n\t\t\tNODE_URL +\r\n\t\t\t'?left=' +\r\n\t\t\tleft +\r\n\t\t\t'&right=' +\r\n\t\t\tright +\r\n\t\t\t'&up=' +\r\n\t\t\tup +\r\n\t\t\t'&down=' +\r\n\t\t\tdown;\r\n\t\tfetch(url)\r\n\t\t\t.then((res) => res.json())\r\n\t\t\t.then((data) => this.setState({ nodeList: data }))\r\n\t\t\t.catch((error) => console.error('Error:', error));\r\n\t}\r\n\r\n\tsetTag(data:any) {\r\n\t\tthis.props.getsourceList(data);\r\n\t}\r\n\r\n\t// Make Marker\r\n\tdisplayMarker(position: any, map: any) {\r\n\t\t// ��Ŀ�� �����մϴ�\r\n\t\t/*var marker = new window.kakao.maps.Marker({\r\n\t\t\tmap: map, // ��Ŀ�� ǥ���� ����\r\n\t\t\tposition: position.latlng, // ��Ŀ�� ��ġ\r\n\t\t});*/\r\n\r\n\t\tvar stationmarker = this.addstationMarker(position, map);\r\n\t\tvar dronemarker = this.adddroneMarker(position, map);\r\n\t\tvar tagmarker = this.addtagMarker(position, map);\r\n\t\tvar tag:tagOptionsElem;\r\n\t\ttag = {label:'', id:0};\r\n\t\ttag.label = position.title;\r\n\t\ttag.id = position.id;\r\n\t\t\r\n\t\t// ��Ŀ�� ǥ���� custom overlay�� �����մϴ�\r\n\t\tif (stationmarker != null) {\r\n\t\t\tvar ScustomOverlay = new window.kakao.maps.CustomOverlay({\r\n\t\t\t\tposition: stationmarker.getPosition(),\r\n\t\t\t});\r\n\r\n\t\t\tvar Scontent = document.createElement('div');\r\n\r\n\t\t\tvar Stitle = document.createElement('div');\r\n\t\t\tStitle.innerHTML = 'station for start point';\r\n\t\t\tStitle.className = 'title';\r\n\t\t\tStitle.setAttribute('style', 'background: #82CAFA;');\r\n\r\n\t\t\tvar ScloseBtn = document.createElement('button');\r\n\r\n\t\t\tScloseBtn.onclick = function () {\r\n\t\t\t\tScustomOverlay.setMap(null);\r\n\t\t\t};\r\n\t\t\tScloseBtn.className = 'close';\r\n\t\t\tScloseBtn.type = 'button';\r\n\r\n\t\t\tStitle.appendChild(ScloseBtn);\r\n\r\n\t\t\tvar Sbody = document.createElement('div');\r\n\t\t\tvar SbodytextAv = document.createElement('div');\r\n\t\t\tvar SbodytextBa = document.createElement('div');\r\n\t\t\tSbodytextAv.appendChild(document.createTextNode('Available: O'));\r\n\t\t\tSbody.insertAdjacentElement('beforeend', SbodytextAv);\r\n\t\t\tSbody.insertAdjacentElement('beforeend', SbodytextBa);\r\n\r\n\t\t\tvar SbodyElem = document.createElement('button');\r\n\t\t\tSbodyElem.className = 'btn'\r\n\t\t\tSbodyElem.setAttribute('style', 'background: #82CAFA; color : white; margin: 10px 0 0 0; font-size: 18px; padding: 0 5px');\r\n\t\t\tSbodyElem.appendChild(document.createTextNode('set this station to start point'));\r\n\t\t\t\r\n\t\t\tSbodyElem.onclick = () =>\r\n\r\n\t\t\tSbody.insertAdjacentElement('beforeend', SbodyElem);\r\n\r\n\t\t\tSbody.className = 'body';\r\n\t\t\tSbody.setAttribute('style', 'margin: 7px 0 0 0; font-size: 18px');\r\n\r\n\t\t\tvar Sinfo = document.createElement('div');\r\n\t\t\tSinfo.className = 'info';\r\n\t\t\tSinfo.insertAdjacentElement('afterbegin', Stitle);\r\n\r\n\t\t\tvar Swrap = document.createElement('div');\r\n\t\t\tSwrap.className = 'wrap';\r\n\t\t\tSwrap.insertAdjacentElement('afterbegin', Sinfo);\r\n\r\n\t\t\tScloseBtn.insertAdjacentElement('afterend', Sbody);\r\n\t\t\tScontent.insertAdjacentElement('afterbegin', Swrap);\r\n\t\t\tScustomOverlay.setContent(Scontent);\r\n\r\n\t\t\twindow.kakao.maps.event.addListener(stationmarker, 'click', function () {\r\n\t\t\t\tScustomOverlay.setMap(map);\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tif (tagmarker != null) {\r\n\t\t\tvar TcustomOverlay = new window.kakao.maps.CustomOverlay({\r\n\t\t\t\tposition: tagmarker.getPosition(),\r\n\t\t\t});\r\n\r\n\t\t\tvar Tcontent = document.createElement('div');\r\n\r\n\t\t\tvar Ttitle = document.createElement('div');\r\n\t\t\tTtitle.innerHTML = 'tag for end point';\r\n\t\t\tTtitle.className = 'title';\r\n\t\t\tTtitle.setAttribute('style', 'background: #82CAFA;');\r\n\r\n\t\t\tvar TcloseBtn = document.createElement('button');\r\n\r\n\t\t\tTcloseBtn.onclick = function () {\r\n\t\t\t\tTcustomOverlay.setMap(null);\r\n\t\t\t};\r\n\t\t\tTcloseBtn.className = 'close';\r\n\t\t\tTcloseBtn.type = 'button';\r\n\r\n\t\t\tTtitle.appendChild(TcloseBtn);\r\n\r\n\t\t\tvar Tbody = document.createElement('div');\r\n\t\t\tvar TbodytextAv = document.createElement('div');\r\n\t\t\tTbodytextAv.appendChild(document.createTextNode('Available: O'));\r\n\t\t\tTbody.insertAdjacentElement('beforeend', TbodytextAv);\r\n\r\n\t\t\tvar TbodyElem = document.createElement('button');\r\n\t\t\tTbodyElem.className = 'btn'\r\n\t\t\tTbodyElem.setAttribute('style', 'background: #82CAFA; color : white; margin: 10px 0 0 0; font-size: 18px; padding: 0 22px');\r\n\t\t\tTbodyElem.appendChild(document.createTextNode('set this tag to end point'));\r\n\t\t\tTbody.insertAdjacentElement('beforeend', TbodyElem);\r\n\r\n\t\t\tTbody.className = 'body';\r\n\t\t\tTbody.setAttribute('style', 'margin: 7px 0 0 0; font-size: 18px');\r\n\r\n\t\t\tvar Tinfo = document.createElement('div');\r\n\t\t\tTinfo.className = 'info';\r\n\r\n\t\t\tTinfo.insertAdjacentElement('afterbegin', Ttitle);\r\n\r\n\t\t\tvar Twrap = document.createElement('div');\r\n\t\t\tTwrap.className = 'wrap';\r\n\t\r\n\t\t\tTwrap.insertAdjacentElement('afterbegin', Tinfo);\r\n\t\t\tTcloseBtn.insertAdjacentElement('afterend', Tbody);\r\n\t\t\tTcontent.insertAdjacentElement('afterbegin', Twrap);\r\n\t\r\n\t\t\tTcustomOverlay.setContent(Tcontent);\r\n\r\n\t\t\twindow.kakao.maps.event.addListener(tagmarker, 'click', function () {\r\n\t\t\t\tTcustomOverlay.setMap(map);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (dronemarker != null) {\r\n\t\t\tvar DcustomOverlay = new window.kakao.maps.CustomOverlay({\r\n\t\t\t\tposition: dronemarker.getPosition(),\r\n\t\t\t});\r\n\r\n\t\t\twindow.kakao.maps.event.addListener(dronemarker, 'click', function () {\r\n\t\t\t\tDcustomOverlay.setMap(map);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// ��Ŀ �̹��� �� ũ�� ���� \r\n\t// ��� ������ ���� ���� �� ��Ŀ�̹��� �ٸ��� ǥ��\r\n\taddstationMarker(position: any, map: any) {\r\n\t\tif ( position.kind === 'station'){\r\n\t\t\tvar imageSrc = 'https://user-images.githubusercontent.com/68888653/126869445-228df4e6-6496-4597-b12e-7a0dd11a12d8.png'\r\n\r\n\t\t\tvar imageSize = new window.kakao.maps.Size(30 , 40),\r\n\t\t\tmarkerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize),\r\n\t\t\t//markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),\r\n\t\t\t\tmarker = new window.kakao.maps.Marker({\r\n\t\t\t\tmap: map,\r\n\t\t\t\tposition: position.latlng, // ��Ŀ�� ��ġ\r\n\t\t\t\timage: markerImage \r\n\t\t\t});\r\n\t\t\treturn marker;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\taddtagMarker(position: any, map: any) {\r\n\t\tif ( position.kind === 'tag') {\r\n\t\t\tvar imageSrc = 'https://user-images.githubusercontent.com/68888653/131796807-2d320e22-d43f-4cdb-9925-a367f14aeca2.png'\r\n\t\r\n\r\n\t\t\tvar imageSize = new window.kakao.maps.Size(30 , 40),\r\n\t\t\tmarkerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize),\r\n\t\t\t//markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),\r\n\t\t\t\tmarker = new window.kakao.maps.Marker({\r\n\t\t\t\tmap: map,\r\n\t\t\t\tposition: position.latlng, // ��Ŀ�� ��ġ\r\n\t\t\t\timage: markerImage \r\n\t\t\t});\r\n\t\r\n\t\t\treturn marker;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tadddroneMarker(position: any, map: any) {\r\n\t\tif ( position.kind  === 'drone') {\r\n\t\t\tvar imageSrc = 'https://user-images.githubusercontent.com/68888653/126869406-4d22668f-04df-44e2-a952-6c4f7f9bc15d.png'\r\n\t\t\t\r\n\t\t\tvar imageSize = new window.kakao.maps.Size(30 , 40),\r\n\t\t\tmarkerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize),\r\n\t\t\t//markerImage = new window.kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),\r\n\t\t\t\tmarker = new window.kakao.maps.Marker({\r\n\t\t\t\tmap: map,\r\n\t\t\t\tposition: position.latlng, // ��Ŀ�� ��ġ\r\n\t\t\t\timage: markerImage \r\n\t\t\t});\r\n\t\treturn marker;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar positions = this.state.nodeList.map((node: nodeListElem) => {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: node.name.split('-')[1],\r\n\t\t\t\tkind: node.name.split('-')[0],\r\n\t\t\t\tid: node.id,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\t'sink : ' + node.sink_id,\r\n\t\t\t\t\t'id : ' + node.id,\r\n\t\t\t\t\t'sensor : ' +\r\n\t\t\t\t\t\tnode.sensor_values.map((sensor: value_list_elem) => sensor.value_name+', '),\r\n\t\t\t\t],\r\n\t\t\t\tlatlng: new window.kakao.maps.LatLng(node.lat, node.lng),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tfor (var i = 0; i < positions.length; i++) {\r\n\t\t\tthis.displayMarker(positions[i], this.state.map);\r\n\r\n\t\t\tif (positions[i].kind == 'station') {\r\n\t\t\t\tvar tagList:tagOptionsElem;\r\n\t\t\t\ttagList = {label:'', id:0};\r\n\r\n\t\t\t\ttagList.id = positions[i].id\r\n\t\t\t\ttagList.label = positions[i].title;\r\n\r\n\t\t\t\t// this.setState({stationList: this.state.stationList.concat(tagList)});\r\n\t\t\t\t// this.props.getsourceList(tagList);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div id=\"node_map\" style={{ width: '100%', height: '500px' }}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default NodeMap;"]},"metadata":{},"sourceType":"module"}